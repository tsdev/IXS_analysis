<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Des McMorrow">
   <meta name="GENERATOR" content="Mozilla/4.6 [en-gb] (Win98; I) [Netscape]">
   <title>spec1d</title>
</head>
<body>

<h2>
Command summary</h2>
&nbsp;
<table BORDER COLS=3 WIDTH="97%" BGCOLOR="#C0C0C0" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td>Command</td>

<td>Description</td>

<td>Examples</td>
</tr>

<tr>
<td>+</td>

<td>Addition of&nbsp; the y values of spectra, or addition of constants
to the x and y values.</td>

<td>Add together the y values in s1, s2, and s3:
<br><tt><font color="#FF0000">>>stot=s1+s2+s3;</font></tt>
<br>Add 10 to the y values in s8:
<br><tt><font color="#FF0000">>>s9=s8+10;</font></tt>
<br>Add 10 to the y values, and 2 to the x values:
<br><tt><font color="#FF0000">>>s9=s8+[2 10;];</font></tt>
<p>Note: The spectra to be added must have identical x axes; otherwise
use combine.</td>
</tr>

<tr>
<td>-</td>

<td>Subtraction of the y values of two spectra, or subtraction of constants
from the x and y values.</td>

<td>Subtract the y values in s2 from those in:
<br><tt><font color="#FF0000">>>s3=s2-s1;</font></tt>
<br>Subract 10 from the y value in s1:
<br><tt><font color="#FF0000">>>s2=s1-10;</font></tt>
<br>Subtract 20 from the x vaue in s10:
<br><tt><font color="#FF0000">>>s11=s10-[20 0];</font></tt>
<p>Note: Can only subtract spectra if they have identical x axes.</td>
</tr>

<tr>
<td>*</td>

<td>Multiplication of the y values of two&nbsp; spectra,&nbsp; or multiply
the x or y values by a constant</td>

<td>Multiply the y values of&nbsp; s2 and s1:
<br><tt><font color="#FF0000">>>s3=s2*s1;</font></tt>
<br>Multiply the y value in s1 by 10:
<br><tt><font color="#FF0000">>>s2=s1*10;</font></tt>
<br>Multiply the x value in s5 by 2 and the y value by 3.5:&nbsp;
<br><tt><font color="#FF0000">>>s7=s5*[2 3.5];</font></tt>
<p>Note: When multiplying spectra, they must have identical x axes.</td>
</tr>

<tr>
<td>/</td>

<td>Division of&nbsp; the spectra of the y values of two spectra, or divide
the x or y values by a constant</td>

<td>Divide&nbsp; the y values of&nbsp; s2 by those in s1:
<br><tt><font color="#FF0000">>>s3=s2/s1;</font></tt>
<br>Divide the y values in s1 by 10:
<br><tt><font color="#FF0000">>>s2=s1/10;</font></tt>
<br>Divide the x values in s5 by 2 and the y value by 3.5:&nbsp;
<br><tt><font color="#FF0000">>>s7=s5/[2 3.5];</font></tt>
<p>Note: When dividing two spectra, they must have identical x axes.</td>
</tr>

<tr>
<td><b><font color="#FF0000">combine</font></b></td>

<td>Combine avearges the y values in&nbsp; two or more spectra. The x tolerance
and combination method are optional. The default method assumes that errors
are determined by counting statistics.&nbsp;</td>

<td>Average s1, s2 and s3 if the x points are closer than 0.01:
<br><tt><font color="#FF0000">>>s4=combine(0.01,s1,s2,s3);</font></tt>
<br>Average all of the spectra in the array of spec1d objects stotal. No
tolerance is specified; the default value is eps:
<br><tt><font color="#FF0000">>>sc=combine(stotal);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">cut</font></b></td>

<td>Remove data over specified range(s) in x</td>

<td>Cut s1 outside of the range 101 to 102&nbsp; in x
<br><tt><font color="#FF0000">>>r=cut(s1,[101 102]);</font></tt>
<br>Cut s1 in the x range 101-102 and 109-110&nbsp;
<br><tt><font color="#FF0000">>>r=cut(s1,[102 101],[110 109]);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">display</font></b></td>

<td>Display the x, y and error values in a spectra</td>

<td>Print the x, y and error values of s2 in the Matlab command window
<br><tt><font color="#FF0000">>>disp(s2);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">dxdy</font></b></td>

<td>Differentiate a spectra</td>

<td><font color="#000000">Differentiate spectra s4:</font>
<br><tt><font color="#FF0000">>>sd=dxdy(s4);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">extract</font></b></td>

<td>Extract the x, y, and error values to arrays&nbsp;</td>

<td>Extract the data from s10 to arrays x, y, error:
<br><tt><font color="#FF0000">>>[x,y,e]=extract(s10);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">fits</font></b></td>

<td>Perform a non-linear least-squares fit on of a specified model to the
data in a spectra</td>

<td>Fit a Gaussian to s1, with automatic estimation of start values of
parameters. All parameters are allowed to vary, and the default values
for the fit control parameters are used:
<br><tt><font color="#FF0000">>>[sfit,fitpars]=fits(s1,'gauss');</font></tt>
<br>Same as above, but with initial parameters specified and background
(parameter 4) fixed:
<br><tt><font color="#FF0000">>>[sfit,fitpars]=fits(s1,'gauss',[0.9 0.1
0.2 0.1],[1 1 1 0]);</font></tt>
<br>As above, but with the fit control parameters specified:
<br><tt><font color="#FF0000">>>[sfit,fitpars]=fits(s1,'gauss',[0.9 0.1
0.2 0.1],[1 1 1 0],[0.001 20 0.01]);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">getfield</font></b></td>

<td>Get the values of&nbsp; specified fields</td>

<td>Obtain the x values from d24:
<br><tt><font color="#FF0000">>>x=getfield(d24,'x');</font></tt>
<br>Obtain the x and y&nbsp; values from d24:
<br><tt><font color="#FF0000">>>[x,y]=getfield(d24,'x');</font></tt>
<br>Obtain the x values and the x_label from d24:
<br><tt><font color="#FF0000">>>[x,xlab]=getfield(d24,'x','x_label');</font></tt>
<p>Note: the number of output variables must equal the number of fields
requested.</td>
</tr>

<tr>
<td><b><font color="#FF0000">horzcat</font></b></td>

<td>Create an array of spectra</td>

<td>Form an array of the spec1d the objects s4, s5, s6:
<br><tt><font color="#FF0000">>>sout=[s4 s5 s6];</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">interpolate</font></b></td>

<td>Interpolate a spectrum to new x vales</td>

<td>Interpolate s10 to the x values specified in the array xnew:
<br><tt><font color="#FF0000">>>snew=interpolate(s10,xnew);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">loads</font></b></td>

<td>Load data from a file into a spectra</td>

<td>Load scan number 14 from the SPEC file ce2.dat:
<br><tt><font color="#FF0000">>>s1=loads('specbatch', 'ce2.dat, X=Theta,Y=Exp_Hutch,M=Mon,S=14');</font></tt>
<br>Load and combine scans 14 to 20:
<br><tt><font color="#FF0000">>>s1=loads('specbatch', 'ce2.dat, X=Theta,Y=Exp_Hutch,M=Mon,S=[14++20]');</font></tt>
<br>Load scans 14 to 20 into&nbsp; an array:
<br><tt><font color="#FF0000">>>s1=loads('specbatch', 'ce2.dat, X=Theta,Y=Exp_Hutch,M=Mon,S=[14:20]');</font></tt>
<p>Load data from the ILL file ho001.dat:
<br><tt><font color="#FF0000">>>s1=loads('illbatch', 'ho001.dat, X=OM,Y=I1,M=Mon');</font></tt>
<br>Load&nbsp; and combine ho001.dat to ho009.dat:
<br><tt><font color="#FF0000">>>s1=loads('illbatch', 'ho00[1++9].dat, X=OM,Y=I1,M=Mon');</font></tt>
<br>Load ho001.dat to ho009.dat into an array:
<br><tt><font color="#FF0000">>>s1=loads('illbatch', 'ho00[1:9].dat, X=OM,Y=I1,M=Mon');</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">mapplot</font></b></td>

<td>Make a 2D plot of the data in an array of spectra.
<br>Note: this is a visualisation tool, and not for data analysis.</td>

<td>Plot&nbsp; array stot&nbsp; (21 spectra):
<br><tt><font color="#FF0000">>>mapplot(stot);</font></tt>
<br>Plot and smooth using a Gaussian convolution of width 0.1;
<br><tt><font color="#FF0000">>>mapplot(stot,[1:21],0.1);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">normalise</font></b></td>

<td>
<br>Normalise the y data in a spectra to a specified value</td>

<td>Normalise y data in s2 to 10.5
<br><tt><font color="#FF0000">>>s5=normalise(s2,10.5);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">peakm</font></b></td>

<td>Calculate peak properties using the method of moments</td>

<td>Perform a peak analysis on s2:
<br><tt><font color="#FF0000">>>stats=peakm(s2);</font></tt>
<br><font color="#000000">Perform peak analysis on array sall:</font>
<br><tt><font color="#FF0000">>>stats=peakm(sall);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">peakt</font></b></td>

<td>Calculate the integrated intensity (and its error) using trapezoidal
integration</td>

<td>Trapezoidal integration of peak in s3:
<br><tt><font color="#FF0000">>>stats=peakt(s3);</font></tt>
<br>Trapezoidal integration of array stot:
<br><tt><font color="#FF0000">>>stats=peakt(stot);</font></tt></td>
</tr>

<tr>
<td><b><font color="#FF0000">plot</font></b></td>

<td>Basic plotting routine for displaying the contents of one or several
spectra</td>

<td>Plot s3:
<br><tt><font color="#FF0000">>>plot(s3);</font></tt>
<br>Overlay s1, s2 and s3:
<br><tt><font color="#FF0000">>>plot(s1 s2 s3);</font></tt>
<br>Overlay s1, s2 and s3 on a loglog plot:
<br><tt><font color="#FF0000">>>plot(s1 s2 s3,'loglog');</font></tt>
<br>Overlay s1, s2 and s3 on a semilogy plot:
<br><tt><font color="#FF0000">>>plot(s1 s2 s3,'loglog');</font></tt><tt><font color="#FF0000"></font></tt>
<p>Overlay spectra in array st:
<br><tt><font color="#FF0000">>>plot(st);</font></tt>
<br><tt><font color="#FF0000"></font></tt>&nbsp;</td>
</tr>

<tr>
<td><b><font color="#FF0000">rebin</font></b></td>

<td>Rebin the data in a spectra to a new x axis</td>

<td>
<br>&nbsp;</td>
</tr>

<tr>
<td><b><font color="#FF0000">setfield</font></b></td>

<td>Set the values of specific fields</td>

<td>Set the x values in d24 to array xn:
<br><tt><font color="#FF0000">>>d24=setfield(d24,'x',xn);</font></tt>
<br>Set the datafile variable (i.e. title of graph)
<br><tt><font color="#FF0000">>>d24=setfield(d24,'datafile','Great data');</font></tt>
<br>&nbsp;</td>
</tr>

<tr>
<td><b><font color="#FF0000">smooth</font></b></td>

<td>Smooth the data using a 1D Gaussian convolution</td>

<td>Convolute s with a Gaussian of variance 0.2:
<br><tt><font color="#FF0000">>>s=smooth(s,0.2)</font></tt>
<br>&nbsp;</td>
</tr>

<tr>
<td><b><font color="#FF0000">spec1d</font></b></td>

<td>Create a new spec1d object</td>

<td>For a structure r&nbsp;
<br><tt><font color="#FF0000">>>r=spec1d(r)</font></tt>
<br>converts r to a spec1d object</td>
</tr>

<tr>
<td><b><font color="#FF0000">vertcat</font></b></td>

<td>Append the data from several spectra into one</td>

<td>Create a single spec1d object from s1, s2 and s3:
<br><tt><font color="#FF0000">>>snew=[s1; s2; s3];</font></tt>
<br>&nbsp;</td>
</tr>
</table>

</body>
</html>
